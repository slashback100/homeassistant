 - switch:
     name: alexa_wifi
     command_on: >-
       cookie=$(wget -S -qO- -T 5 --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.10.186:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X POST --insecure --data-binary '{"mac": "c0:95:cf:24:82:fd", "cmd": "unblock-sta"}' -H "Cookie: $cookie" "https://192.168.10.186:8443/api/s/default/cmd/stamgr" && wget -T 5 -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.10.186:8443/api/logout' > /dev/null
     command_off: >-
       cookie=$(wget -S -qO- -T 5 --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.10.186:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X POST --insecure --data-binary '{"mac": "c0:95:cf:24:82:fd", "cmd": "block-sta"}' -H "Cookie: $cookie" "https://192.168.10.186:8443/api/s/default/cmd/stamgr" && wget -T 5 -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.10.186:8443/api/logout' > /dev/null
     command_state: >-
      cookie=$(wget -S -qO- -T 5 --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.10.186:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X GET --insecure -H "Cookie: $cookie" "https://192.168.10.186:8443/v2/api/site/default/clients/active?includeTrafficUsage=false&includeUnifiDevices=false" 2> /dev/null| jq '.[] | select(.id == "c0:95:cf:24:82:fd") | .blocked'
     value_template: '{{ value == "false" }}'
