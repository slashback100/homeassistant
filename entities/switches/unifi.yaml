                   #cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X PUT --insecure -d '{"_id":"5f0632183c19442b91f77843","enabled":false,"security":"open","wep_idx":1,"wpa_mode":"wpa2","wpa_enc":"ccmp","usergroup_id":"5f0629f93c19442546751c91","dtim_mode":"default","dtim_ng":1,"dtim_na":1,"minrate_ng_enabled":true,"minrate_ng_advertising_rates":false,"minrate_ng_data_rate_kbps":6000,"minrate_ng_cck_rates_enabled":true,"minrate_na_enabled":false,"minrate_na_advertising_rates":false,"minrate_na_data_rate_kbps":6000,"mac_filter_enabled":false,"mac_filter_policy":"allow","mac_filter_list":[],"name_combine_enabled":true,"name_combine_suffix":"_IoT","bc_filter_enabled":true,"bc_filter_list":[],"group_rekey":3600,"hotspot2conf_enabled":false,"bss_transition":true,"auth_cache":true,"schedule_reversed":false,"name":"wifi_network_guest","is_guest":true,"wlangroup_id":"5f0629f93c19442546751c92","radius_das_enabled":false,"fast_roaming_enabled":false,"schedule":[],"minrate_ng_mgmt_rate_kbps":6000,"minrate_na_mgmt_rate_kbps":6000,"minrate_ng_beacon_rate_kbps":6000,"minrate_na_beacon_rate_kbps":6000,"site_id":"5f0629f23c19442546751c80","x_iapp_key":"845f1c63c7a7f058668d27241d2b149f","schedule_enabled":false}' -H "Cookie: $cookie"  'https://192.168.0.211:8443/api/s/default/rest/wlanconf/60be722bc0e3eb5a16dfda75' && wget -S -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout'
                   #cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X PUT --insecure -d '{"_id":"60be722bc0e3eb5a16dfda75","name":"wifi_network_guest","ap_group_ids":["60be703dc0e3eb5a16dfda2c"],"enabled":true,"mcastenhance_enabled":false,"b_supported":false,"fast_roaming_enabled":false,"group_rekey":3600,"hide_ssid":false,"x_wep":"","wep_idx":1,"radiusprofile_id":"","security":"open","schedule":[],"schedule_enabled":false,"wlan_band":"both","wpa_mode":"wpa2","is_guest":true,"uapsd_enabled":false,"no2ghz_oui":false,"minrate_ng_enabled":true,"minrate_ng_data_rate_kbps":6000,"minrate_ng_advertising_rates":false,"minrate_ng_cck_rates_enabled":true,"minrate_ng_mgmt_rate_kbps":6000,"minrate_na_enabled":false,"minrate_na_data_rate_kbps":6000,"minrate_na_advertising_rates":false,"minrate_na_mgmt_rate_kbps":6000,"dtim_mode":"default","dtim_na":3,"dtim_ng":3,"mac_filter_enabled":false,"mac_filter_policy":"allow","mac_filter_list":[],"radius_mac_auth_enabled":false,"radius_macacl_format":"none_lower","radius_macacl_empty_password":false,"bc_filter_enabled":false,"bc_filter_list":[],"radius_das_enabled":false,"site_id":"60be702fc0e3eb5a16dfda11","usergroup_id":"60be703dc0e3eb5a16dfda23","networkconf_id":"60be703dc0e3eb5a16dfda22","iapp_enabled":true,"x_iapp_key":"9c78d4a83ca222336fa8800ae5cd0125","minrate_ng_beacon_rate_kbps":6000,"wpa_enc":"ccmp","name_combine_enabled":true,"name_combine_suffix":"_IoT","hotspot2conf_enabled":false,"bss_transition":true,"auth_cache":true,"schedule_reversed":false,"minrate_na_beacon_rate_kbps":6000,"wpa3_support":false,"wpa3_transition":false,"pmf_mode":"optional","pmf_cipher":"auto"}' -H "Cookie: $cookie"  'https://192.168.0.211:8443/api/s/default/rest/wlanconf/60be722bc0e3eb5a16dfda75' && wget -S -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout'
  - platform: command_line
    switches:
       guest_wifi:
           command_on: >-
                   cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl 'https://192.168.0.211:8443/api/s/default/rest/wlanconf/60be722bc0e3eb5a16dfda75' -X 'PUT' -H 'Content-Type: application/json;charset=utf-8' -H 'Accept: application/json, text/plain, */*' -H 'Accept-Encoding: gzip, deflate, br' -H 'Accept-Language: en-gb' -H 'Host: 192.168.0.211:8443' -H 'Origin: https://192.168.0.211:8443' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.2 Safari/605.1.15' -H 'Connection: keep-alive' -H 'Referer: https://192.168.0.211:8443/manage/default/settings/wifi/hotspot/form/60be722bc0e3eb5a16dfda75' -H 'Content-Length: 1355' -H 'Cookie: '"$cookie" -H 'X-Csrf-Token: j5DeCjXE218hMA6hPe5hjJg9xJJ7sMYP' --data-binary '{"ap_group_ids":["60be703dc0e3eb5a16dfda2c"],"enabled":true,"fast_roaming_enabled":false,"hide_ssid":false,"name":"wifi_network_guest","networkconf_id":"60be703dc0e3eb5a16dfda22","pmf_mode":"disabled","radiusprofile_id":"","usergroup_id":"60be703dc0e3eb5a16dfda23","wlan_bands":["2g","5g"],"wpa3_support":false,"wpa3_transition":false,"wpa3_fast_roaming":false,"wpa3_enhanced_192":false,"uapsd_enabled":false,"mcastenhance_enabled":false,"no2ghz_oui":false,"bss_transition":true,"proxy_arp":false,"l2_isolation":false,"b_supported":false,"optimize_iot_wifi_connectivity":true,"dtim_mode":"default","minrate_ng_enabled":true,"minrate_ng_data_rate_kbps":6000,"minrate_ng_advertising_rates":false,"minrate_na_enabled":false,"minrate_na_data_rate_kbps":6000,"minrate_na_advertising_rates":false,"mac_filter_enabled":false,"mac_filter_policy":"allow","mac_filter_list":[],"radius_mac_auth_enabled":false,"radius_macacl_format":"none_lower","_id":"60be722bc0e3eb5a16dfda75","bc_filter_enabled":false,"bc_filter_list":[],"iapp_enabled":true,"is_guest":true,"radius_das_enabled":false,"radius_macacl_empty_password":false,"schedule":[],"schedule_enabled":false,"security":"open","x_iapp_key":"9c78d4a83ca222336fa8800ae5cd0125","minrate_ng_mgmt_rate_kbps":6000,"minrate_ng_beacon_rate_kbps":6000,"minrate_na_mgmt_rate_kbps":6000,"minrate_na_beacon_rate_kbps":6000}' --insecure && wget -S -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout'
           command_off: >-
                   cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X PUT --insecure -d '{"name":"wifi_network_guest","ap_group_ids":["60be703dc0e3eb5a16dfda2c"],"enabled":false,"mcastenhance_enabled":false,"b_supported":false,"fast_roaming_enabled":false,"group_rekey":3600,"vlan_enabled":false,"vlan":3000,"hide_ssid":false,"x_wep":"","wep_idx":1,"radiusprofile_id":"","security":"open","schedule":[],"schedule_enabled":false,"wlan_band":"both","wpa_mode":"wpa2","is_guest":true,"uapsd_enabled":false,"no2ghz_oui":false,"minrate_ng_enabled":true,"minrate_ng_data_rate_kbps":6000,"minrate_ng_advertising_rates":false,"minrate_ng_cck_rates_enabled":true,"minrate_ng_beacon_rate_kbps":6000,"minrate_ng_mgmt_rate_kbps":1000,"minrate_na_enabled":false,"minrate_na_data_rate_kbps":6000,"minrate_na_advertising_rates":false,"minrate_na_mgmt_rate_kbps":6000,"dtim_mode":"default","dtim_na":3,"dtim_ng":3,"mac_filter_enabled":false,"mac_filter_policy":"allow","mac_filter_list":[],"radius_mac_auth_enabled":false,"radius_macacl_format":"none_lower","radius_macacl_empty_password":false,"bc_filter_enabled":false,"bc_filter_list":[],"radius_das_enabled":false,"_id":"60be722bc0e3eb5a16dfda75","usergroup_id":"60be703dc0e3eb5a16dfda23","networkconf_id":"60be703dc0e3eb5a16dfda22","iapp_enabled":true,"x_iapp_key":"9c78d4a83ca222336fa8800ae5cd0125"}'  -H "Cookie: $cookie"  'https://192.168.0.211:8443/api/s/default/rest/wlanconf/60be722bc0e3eb5a16dfda75' && wget -S -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout'
           command_state: >-
                   cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && wget --no-check-certificate -S -qO-  --header="Cookie: $cookie" 'https://192.168.0.211:8443/api/s/default/rest/wlanconf/60be722bc0e3eb5a16dfda75' 2> /dev/null| jq '.data[0].enabled' && wget -S -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout' > /dev/null 2>&1
           value_template: '{{ value == "true" }}'
           friendly_name: Wifi guest

  - platform: command_line
    switches:
       unifi_rdc:
           command_on: >-
                   cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X PUT --insecure -d '{"disabled": false}' -H "Cookie: $cookie" "https://192.168.0.211:8443/api/s/default/rest/device/60be71d6c0e3eb5a16dfda57" && wget -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout' > /dev/null
           command_off: >-
                   cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X PUT --insecure -d '{"disabled": true}' -H "Cookie: $cookie" "https://192.168.0.211:8443/api/s/default/rest/device/60be71d6c0e3eb5a16dfda57" && wget -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout' > /dev/null
           command_state: >-
                   cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && wget -qO- --no-check-certificate --header="Cookie: $cookie" "https://192.168.0.211:8443/api/s/default/stat/device/fc:ec:da:8c:8b:24" | jq '.data[0].disabled' && wget -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout' > /dev/null
           value_template: '{{ value == "false" }}'
           friendly_name: "Unifi Rez-de-chaussée"
  - platform: command_line
    switches:
       unifi_cave:
           command_on: >-
                   cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X PUT --insecure -d '{"disabled": false}' -H "Cookie: $cookie" "https://192.168.0.211:8443/api/s/default/rest/device/60be7e49c0e3eb5d9494ff44" && wget -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout' > /dev/null
           command_off: >-
                   cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && curl -X PUT --insecure -d '{"disabled": true}' -H "Cookie: $cookie" "https://192.168.0.211:8443/api/s/default/rest/device/60be7e49c0e3eb5d9494ff44" && wget -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout' > /dev/null
           command_state: >-
                   cookie=$(wget -S -qO- --no-check-certificate --post-data='{"username":"christ", "password": "hirwyx-0jompy-rujWiz"}' 'https://192.168.0.211:8443/api/login' 2>&1 | grep Set-Cookie | cut -f2 -d':' | cut -f1 -d';' | xargs echo | sed -E 's/ /;/') && wget -qO- --no-check-certificate --header="Cookie: $cookie" "https://192.168.0.211:8443/api/s/default/stat/device/f0:9f:c2:73:69:90" | jq '.data[0].disabled' && wget -qO- --no-check-certificate --header="Cookie: $cookie" --post-data='{}' 'https://192.168.0.211:8443/api/logout' > /dev/null
           value_template: '{{ value == "false" }}'
           friendly_name: "Unifi Cave"
